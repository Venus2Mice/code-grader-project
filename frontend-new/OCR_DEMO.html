<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image-to-Code OCR Demo</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            max-width: 1200px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 { color: #6366f1; }
        .demo-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .code-sample {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
        }
        .step {
            background: #f0f9ff;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin: 15px 0;
        }
        .warning {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin: 15px 0;
        }
        .success {
            background: #dcfce7;
            border-left: 4px solid #22c55e;
            padding: 15px;
            margin: 15px 0;
        }
        img {
            max-width: 100%;
            border: 2px solid #e5e7eb;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>📷 Image-to-Code OCR Feature - Demo Guide</h1>
    
    <div class="demo-section">
        <h2>✅ Setup Complete!</h2>
        <p>Tính năng Image-to-Code OCR đã được tích hợp thành công vào hệ thống.</p>
        
        <div class="success">
            <strong>✓ Files Created:</strong>
            <ul>
                <li><code>frontend-new/lib/gemini-ocr.ts</code> - Core OCR engine</li>
                <li><code>frontend-new/components/image-to-code-upload.tsx</code> - Upload UI</li>
                <li><code>frontend-new/.env.local</code> - API configuration</li>
            </ul>
        </div>
    </div>

    <div class="demo-section">
        <h2>🚀 Quick Start (3 Steps)</h2>
        
        <div class="step">
            <strong>Step 1: Get Gemini API Key</strong>
            <ol>
                <li>Visit: <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a></li>
                <li>Login with Google account</li>
                <li>Click "Create API Key"</li>
                <li>Copy the key (starts with <code>AIzaSy...</code>)</li>
            </ol>
        </div>

        <div class="step">
            <strong>Step 2: Configure API Key</strong>
            <p>Edit <code>frontend-new/.env.local</code>:</p>
            <div class="code-sample">
NEXT_PUBLIC_GEMINI_API_KEY=AIzaSyDxxxxxxxxxxxxxxxxxxxxx</div>
        </div>

        <div class="step">
            <strong>Step 3: Restart Dev Server</strong>
            <div class="code-sample">
cd frontend-new
npm run dev</div>
        </div>
    </div>

    <div class="demo-section">
        <h2>📸 How to Use</h2>
        
        <ol>
            <li><strong>Login as Student</strong></li>
            <li><strong>Navigate to any Problem</strong></li>
            <li><strong>Click "UPLOAD" button</strong> (top right)</li>
            <li><strong>Switch to "📷 Image Upload" tab</strong></li>
            <li><strong>Upload image</strong> containing code</li>
            <li><strong>Wait 2-5 seconds</strong> for AI processing</li>
            <li><strong>Review extracted code</strong> in editor</li>
            <li><strong>Edit if needed</strong></li>
            <li><strong>Submit normally</strong></li>
        </ol>
    </div>

    <div class="demo-section">
        <h2>💡 Example Code for Testing</h2>
        <p>You can screenshot this code and test the OCR:</p>
        
        <div class="code-sample">
<pre>#include &lt;iostream&gt;
using namespace std;

int factorial(int n) {
    if (n <= 1) return 1;
    return n * factorial(n - 1);
}

int main() {
    int num = 5;
    cout << "Factorial of " << num << " is " << factorial(num) << endl;
    return 0;
}</pre>
        </div>

        <div class="warning">
            <strong>⚠️ Test Process:</strong>
            <ol>
                <li>Take screenshot of code above</li>
                <li>Upload to system</li>
                <li>Check if AI correctly extracts all lines</li>
                <li>Verify indentation is preserved</li>
            </ol>
        </div>
    </div>

    <div class="demo-section">
        <h2>🎯 Supported Image Formats</h2>
        <table style="width: 100%; border-collapse: collapse;">
            <tr style="background: #f3f4f6;">
                <th style="padding: 10px; text-align: left; border: 1px solid #e5e7eb;">Format</th>
                <th style="padding: 10px; text-align: left; border: 1px solid #e5e7eb;">Max Size</th>
                <th style="padding: 10px; text-align: left; border: 1px solid #e5e7eb;">Status</th>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #e5e7eb;">JPEG/JPG</td>
                <td style="padding: 10px; border: 1px solid #e5e7eb;">10 MB</td>
                <td style="padding: 10px; border: 1px solid #e5e7eb;">✅ Recommended</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #e5e7eb;">PNG</td>
                <td style="padding: 10px; border: 1px solid #e5e7eb;">10 MB</td>
                <td style="padding: 10px; border: 1px solid #e5e7eb;">✅ Recommended</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #e5e7eb;">GIF</td>
                <td style="padding: 10px; border: 1px solid #e5e7eb;">10 MB</td>
                <td style="padding: 10px; border: 1px solid #e5e7eb;">✅ Supported</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #e5e7eb;">WebP</td>
                <td style="padding: 10px; border: 1px solid #e5e7eb;">10 MB</td>
                <td style="padding: 10px; border: 1px solid #e5e7eb;">✅ Supported</td>
            </tr>
        </table>
    </div>

    <div class="demo-section">
        <h2>⚡ Performance & Limits</h2>
        
        <div class="success">
            <strong>Free Tier (Google Gemini):</strong>
            <ul>
                <li>15 requests per minute</li>
                <li>1,500 requests per day</li>
                <li>$0 cost</li>
            </ul>
        </div>

        <div class="warning">
            <strong>⚠️ Best Practices:</strong>
            <ul>
                <li>Use clear, well-lit images</li>
                <li>Avoid blurry or dark photos</li>
                <li>Capture code straight-on (not at an angle)</li>
                <li>Always review extracted code before submitting</li>
            </ul>
        </div>
    </div>

    <div class="demo-section">
        <h2>🐛 Troubleshooting</h2>
        
        <h3>Error: "GEMINI_API_KEY not configured"</h3>
        <p><strong>Solution:</strong> Check <code>.env.local</code> file exists and has correct key name: <code>NEXT_PUBLIC_GEMINI_API_KEY</code></p>
        
        <h3>Error: "Failed to extract code"</h3>
        <p><strong>Possible causes:</strong></p>
        <ul>
            <li>Image too blurry or dark</li>
            <li>Image doesn't contain code</li>
            <li>API key invalid or quota exceeded</li>
        </ul>
        
        <h3>Code extracted incorrectly</h3>
        <p><strong>This is normal!</strong> AI is not 100% perfect. Students should:</p>
        <ul>
            <li>Review extracted code carefully</li>
            <li>Edit manually if needed</li>
            <li>Try with a clearer image</li>
        </ul>
    </div>

    <div class="demo-section">
        <h2>📊 Technical Architecture</h2>
        <div class="code-sample">
<pre>
┌─────────────────────────────────────────────────┐
│            Student Browser (Frontend)           │
├─────────────────────────────────────────────────┤
│  1. Upload Image (JPEG/PNG/GIF/WebP)           │
│  2. Convert to Base64                           │
│  3. Call Gemini API (HTTPS)                     │
│  4. Receive extracted code                      │
│  5. Display in code editor                      │
│  6. Allow manual editing                        │
│  7. Submit to grading system                    │
└─────────────────────────────────────────────────┘
                      ↓
┌─────────────────────────────────────────────────┐
│         Google Gemini AI (Cloud)                │
├─────────────────────────────────────────────────┤
│  • OCR + Code Understanding                     │
│  • Format Detection                             │
│  • Syntax Error Detection                       │
│  • Code Formatting                              │
└─────────────────────────────────────────────────┘
</pre>
        </div>
    </div>

    <div class="demo-section">
        <h2>✨ Feature Highlights</h2>
        <ul>
            <li>✅ <strong>Frontend-only</strong> - No backend changes needed</li>
            <li>✅ <strong>Fast</strong> - 2-5 seconds processing time</li>
            <li>✅ <strong>Accurate</strong> - High-quality OCR with Gemini 2.0 Flash</li>
            <li>✅ <strong>Safe</strong> - Students must review before submit</li>
            <li>✅ <strong>Multi-language</strong> - C++, Python, Java, JavaScript, etc.</li>
            <li>✅ <strong>Error detection</strong> - Warns about syntax issues</li>
        </ul>
    </div>

    <div class="demo-section">
        <h2>📚 Documentation</h2>
        <ul>
            <li><a href="./IMAGE_OCR_README.md">Full Documentation (IMAGE_OCR_README.md)</a></li>
            <li><a href="./QUICKSTART_OCR.md">Quick Start Guide (QUICKSTART_OCR.md)</a></li>
            <li><a href="https://ai.google.dev/gemini-api/docs">Gemini API Docs</a></li>
        </ul>
    </div>

    <div class="demo-section" style="background: #1e293b; color: white;">
        <h2 style="color: #60a5fa;">🎉 Ready to Test!</h2>
        <p>The feature is now fully integrated and ready to use.</p>
        <p><strong>Next steps:</strong></p>
        <ol>
            <li>Configure your Gemini API key</li>
            <li>Restart the dev server</li>
            <li>Take a screenshot of some code</li>
            <li>Upload and test the OCR</li>
            <li>Enjoy! 🚀</li>
        </ol>
    </div>

</body>
</html>
